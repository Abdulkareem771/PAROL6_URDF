<!DOCTYPE html>
<html>
<head>
    <title>PAROL6 Simple Control</title>
    <script src="https://cdn.jsdelivr.net/npm/roslib@1.3.0/build/roslib.min.js"></script>
    <style>
        body { font-family: Arial, sans-serif; margin: 20px; text-align: center; }
        .control-panel { max-width: 400px; margin: 0 auto; padding: 20px; background: #f5f5f5; border-radius: 10px; }
        button { padding: 15px 30px; margin: 10px; font-size: 18px; cursor: pointer; border: none; border-radius: 5px; }
        .move-btn { background: #007bff; color: white; }
        .home-btn { background: #28a745; color: white; }
        .stop-btn { background: #dc3545; color: white; }
        #status { margin: 20px; padding: 10px; border-radius: 5px; }
        .connected { background: #d4edda; color: #155724; }
        .disconnected { background: #f8d7da; color: #721c24; }
    </style>
</head>
<body>
    <div class="control-panel">
        <h1>ü§ñ PAROL6 Simple Control</h1>
        <div id="status" class="disconnected">Disconnected</div>
        
        <h3>Joint Control</h3>
        <button class="move-btn" onclick="moveJoint(1, 0.5)">Move Joint 1</button>
        <button class="move-btn" onclick="moveJoint(2, 0.5)">Move Joint 2</button>
        <button class="move-btn" onclick="moveJoint(3, 0.5)">Move Joint 3</button>
        
        <h3>Actions</h3>
        <button class="home-btn" onclick="goHome()">üè† Go Home</button>
        <button class="stop-btn" onclick="stopRobot()">üõë Stop</button>
        
        <div style="margin-top: 20px; font-size: 14px; color: #666;">
            <p>Check Ignition Gazebo to see the robot move!</p>
        </div>
    </div>

    <script>
        // ROS connection
        const ros = new ROSLIB.Ros({
            url: 'ws://' + window.location.hostname + ':9090'
        });

        ros.on('connection', () => {
            document.getElementById('status').textContent = 'Connected to ROS';
            document.getElementById('status').className = 'connected';
            console.log('Connected to ROS');
        });

        ros.on('error', (error) => {
            document.getElementById('status').textContent = 'Error: ' + error;
            document.getElementById('status').className = 'disconnected';
        });

        // Command publisher
        const cmdPublisher = new ROSLIB.Topic({
            ros: ros,
            name: '/web_commands',
            messageType: 'std_msgs/String'
        });

        function sendCommand(cmd) {
            try {
                const msg = new ROSLIB.Message({
                    data: JSON.stringify(cmd)
                });
                cmdPublisher.publish(msg);
                console.log('Sent command:', cmd);
            } catch (error) {
                console.error('Error sending command:', error);
            }
        }

        function moveJoint(jointNum, position) {
            const positions = [0.0, 0.0, 0.0, 0.0, 0.0, 0.0];
            positions[jointNum - 1] = position;
            
            const cmd = {
                type: 'joint_command',
                positions: positions
            };
            sendCommand(cmd);
            alert(`Moving joint ${jointNum} to position ${position}`);
        }

        function goHome() {
            const cmd = {
                type: 'moveit_command',
                action: 'home'
            };
            sendCommand(cmd);
            alert('Sending robot to home position');
        }

        function stopRobot() {
            const cmd = {
                type: 'moveit_command',
                action: 'stop'
            };
            sendCommand(cmd);
            alert('Emergency stop sent');
        }
    </script>
</body>
</html>
